<html>
  <head>
	<style>
#zombie_map {
    width: 600px;
    height: 400px;
    background-color: grey;
}
	</style>
    <title>My page title</title>
  </head>
  <body>My zombie map
<div id="zombie_map"></div>
<form>
Select an emoji
<select id="icon_to_use">
  <option value="zombie.png">Zombie</option>
  <option value="hospital.png">Hospital</option>
  <option value="sword.png">Sword</option>
</select>
</form>
<script async defer
	src="https://maps.googleapis.com/maps/api/js?key=AIzaSyB5LQ1cHTUM4CTIcGjOMpqI71vWLRqb4-Q&callback=initMap">
</script>
<script>

    var zombie_map;
	var old_position;
	var all_markers = []
	var data = `51.45198651525947 0.001953564901926441 zombie.png|
51.45196269676541 0.001985080857851429 zombie.png|
51.45200991587312 0.0019243958788894844 zombie.png|
51.45197360124411 0.0019779760303251237 sword.png|
51.45203610356147 0.0018800573017196953 zombie.png|
51.45205887734838 0.0018750281598167717 zombie.png|
51.45208169965391 0.0018445180322723687 zombie.png|
51.45212348636844 0.0018290953304367363 zombie.png|
51.45218886844387 0.001815587563891441 zombie.png|
51.45219074884243 0.00183670995988372 zombie.png|
51.452128904582445 0.0017730074957800213 zombie.png|
51.45215439445649 0.0018313455418539348 sword.png|
51.45213788872001 0.0018310102657270733 sword.png|
51.45217570565176 0.0018353688553762737 sword.png|
51.45218839152231 0.0018628299090472922 zombie.png|
51.4521852575245 0.0019141271564571127 zombie.png|
51.45218254139288 0.0019614010903445944 zombie.png|
51.4521825423116 0.002011946546405241 zombie.png|
51.45217230458334 0.0020954303019937726 zombie.png|
51.45216712405323 0.0021520919674333783 zombie.png|
51.45216858658615 0.00219936590132086 zombie.png|
51.45216106498779 0.0022335640662607403 zombie.png|
51.45216461685384 0.002260386156409666 zombie.png|
51.45217855331417 0.0018920314497528068 sword.png|
51.45217270318351 0.001961768884140014 sword.png|
51.452170195984415 0.002051622886138915 sword.png|
51.45216016718667 0.0021307480520782462 sword.png|
51.45215515278698 0.0021884155458984367 sword.png|
51.45215515278698 0.002204508799987792 sword.png|
51.452146795452926 0.00225949408479309 sword.png|
51.452150138386735 0.002325208205657958 sword.png|
51.45215180985353 0.0024110388941345207 hospital.png|
51.452152645586914 0.002459318656402587 sword.png|
51.45216772517573 0.002533079404312133 zombie.png|
51.4521693966419 0.0026041579432067863 zombie.png|
51.45212760996937 0.0026832831091461173 zombie.png|
51.4521263563686 0.0027261984533843986 zombie.png|
51.45210420941604 0.0028086763805923454 zombie.png|
51.452084317455544 0.0029805090916124044 zombie.png|
51.452066349157555 0.002973803569075173 zombie.png|
51.45207972091486 0.0029523458969560323 sword.png|
51.45204796298487 0.003103890706297463 zombie.png|
51.45202048407605 0.003231134580294892 zombie.png|
51.45199791920403 0.00333305852286081 zombie.png|
51.45196654958259 0.0036000803497504563 zombie.png|
51.45197323547633 0.0034518883016776414 zombie.png|
51.45194840841691 0.0035619950490373142 zombie.png|
51.451920076300325 0.003671430859650826 hospital.png|
51.451895422033516 0.0037988357878582235 hospital.png|
51.45191071320369 0.003740099958458032 sword.png|
51.45188313384784 0.0038715282001877682 sword.png|
51.451862658254704 0.003962723306694116 sword.png|
51.45185354664105 0.004026016824560941 hospital.png|
51.45187485797675 0.0039140345981891755 hospital.png|
51.45182346003254 0.004147683127513346 hospital.png|
51.45181468476798 0.0042040095168260905 sword.png|
51.451800895063144 0.004266370876422343 zombie.png|
51.451796298493946 0.004267041428676066 zombie.png|
51.45179281237959 0.004324743068382375 zombie.png|
51.45177400822659 0.004371681726142995 zombie.png|
51.45177944053824 0.004424655354187124 zombie.png|
51.45176147212029 0.00443672529475414 zombie.png|
51.451766904433434 0.004475617325470083 zombie.png|
51.451752278973466 0.004476287877723806 zombie.png|
51.451763143601305 0.004510486042663686 zombie.png|
51.45174642878817 0.00450713328139507 zombie.png|
51.45172786473833 0.0046160016922414115 zombie.png|
51.45171114991226 0.004701161828464251 zombie.png|
51.45170613546327 0.0047506339100156225 zombie.png|
51.45167939172587 0.004872674420193235 zombie.png|
51.451671034304724 0.004993373825863401 zombie.png|
51.451684598076 0.005097801536941837 sword.png|
51.45168543381794 0.005068297237778019 hospital.png|
51.45169755207429 0.005127976388359379 hospital.png|
51.451684598076 0.005048851222420048 sword.png|
51.45170298439505 0.005162174553299259 sword.png|
51.45172513154223 0.005201737136268925 sword.png|
51.4516928514437 0.0052151481813433875 zombie.png|
51.45170914840572 0.005213807076835941 zombie.png|
51.4517164611432 0.005268792361641239 zombie.png|
51.45173812677651 0.00535925236512913 zombie.png|
51.45175149862997 0.0054209431724716595 zombie.png|
51.45178313817208 0.005531104048972502 zombie.png|
51.45175723022044 0.005534792086367979 zombie.png|
51.451812806937376 0.005627328297381773 zombie.png|
51.45180194232133 0.005589777371173277 zombie.png|
51.45182116433255 0.005585418781524076 zombie.png|
51.45183258367069 0.005611119380652951 zombie.png|
51.451819838645605 0.005603743305861997 zombie.png|
51.45183801597536 0.00559368502205615 sword.png|
51.45185117886486 0.00558731477564578 sword.png|
51.45186267027319 0.0055819503576159946 sword.png|
51.45187144552851 0.005569880417048978 zombie.png|
51.45187687782858 0.005575580111205625 zombie.png|
51.45187562422092 0.0055819503576159946 zombie.png|
51.45189923382592 0.005562169066131162 hospital.png|
51.45191720218968 0.0055561340958476535 hospital.png|
51.45189192111773 0.0055631748945117465 sword.png|
51.45191490391096 0.00555546354359393 sword.png|
51.45192576850014 0.005552781334579038 sword.png|
51.451933290137255 0.005535682252109098 zombie.png|
51.45193746882401 0.0055420524985194675 zombie.png|
51.45193621521803 0.005550434401691007 zombie.png|
51.451965048147024 0.005519588998019742 zombie.png|
51.451981762880145 0.005530653110206174 zombie.png|
51.45229263093209 0.00535443134646485 zombie.png|
51.45229576492251 0.005363819078016974 zombie.png|
51.452289705874136 0.005366166010905005 zombie.png|
51.452289288008686 0.0053584546599871885 zombie.png|
51.452301406104745 0.005351749137449957 zombie.png|
51.45230349543134 0.005359125212240912 zombie.png|
51.4523666956485 0.005315699326073897 zombie.png|
51.45241412327049 0.00527144287732817 zombie.png|
51.452407855305665 0.005272783981835616 zombie.png|
51.452415376863385 0.005294576930081618 zombie.png|
51.45243000211092 0.005257696556126845 zombie.png|
51.452432718227804 0.005301953004872573 zombie.png|
51.45243661707842 0.005277944827106751 sword.png|
51.4524629425084 0.005266880714920319 sword.png|
51.45249031258217 0.005253804945972718 sword.png|
51.45251609556084 0.005230200219559222 zombie.png|
51.452535317271405 0.005236905742096454 zombie.png|
51.45256435875348 0.005208742547440082 zombie.png|
51.45258086433579 0.0052080719951863585 zombie.png|
51.45259757884344 0.005198348987507373 zombie.png|
51.4526132486888 0.005186614323067218 zombie.png|
51.452644379432314 0.005161803889679462 zombie.png|
51.452676972671206 0.0051614686135526 zombie.png|
51.452703297962564 0.005129952657627612 zombie.png|
51.45272878751593 0.005134311247276813 zombie.png|
51.45275239667969 0.005105142224239856 zombie.png|
51.45277809513611 0.005112853575157672 zombie.png|
51.452811941861526 0.005072620439934283 zombie.png|
51.45283429740096 0.005086031485008746 zombie.png|
51.45286124939192 0.0050521685961957274 zombie.png|
51.452888201366946 0.005052839148449451 zombie.png|
51.45285184753641 0.005059544670986682 sword.png|
51.45287608342666 0.00505485080521062 sword.png|
51.452889663876775 0.005039763379501849 sword.png|
51.45291348188721 0.005030040371822864 hospital.png|
51.45294147848006 0.0050152882222409545 hospital.png|
51.452905124691966 0.00503775172274068 sword.png|
51.4529310319922 0.005020987916397601 sword.png|
51.45295255175461 0.005013276565479785 sword.png|
51.452979555908115 0.004987125027584582 zombie.png|
51.453001702436026 0.004992154169487506 zombie.png|
51.45302113287148 0.004972372878002673 zombie.png|
51.45304474188406 0.004961644041943103 zombie.png|
51.453066679451176 0.004952926862644702 zombie.png|
51.45301468306548 0.004999209413356631 sword.png|
51.4530339045661 0.004952270755596011 sword.png|
51.453065035022725 0.004972387323207705 sword.png|
51.45307589933817 0.004946906337566226 sword.png|
51.45315017183252 0.004895754381735173 zombie.png|
51.45314641111435 0.004894413277227727 zombie.png|
51.4531430682535 0.00489508382948145 zombie.png|
51.45314536647035 0.004883684441168157 zombie.png|
51.45313951646358 0.004882008060533849 zombie.png|
51.45522701492183 0.004023313522338867 zombie.png|
51.452149735762426 0.006417022648892434 zombie.png|
51.4529608787865 0.005717473031259246 zombie.png|
51.45365953417222 0.004730420113778777 zombie.png|
51.45363279157917 0.0047411489498383474 zombie.png|
51.45363279157917 0.004649953843332 zombie.png|
51.45390594055722 0.004514502288079925 zombie.png|
51.45393310084067 0.004516513944841094 zombie.png|
51.454029997252825 0.00445594241317071 zombie.png|
51.4540738714296 0.004426438114006892 zombie.png|
51.45409601742663 0.0044284497707680615 zombie.png|
51.454158276870174 0.0043962632625893505 zombie.png|
51.45424310000222 0.004382852217514888 zombie.png|
51.454235996593255 0.004389557740052119 zombie.png|
51.4542318181169 0.0043915693968132885 zombie.png|
51.454235578745646 0.004378158351738826 zombie.png|
51.45423641444089 0.0043774877994851025 zombie.png|
51.45423223596454 0.004378158351738826 zombie.png|
51.45423223596454 0.004378828903992549 zombie.png|
51.45423223596454 0.004379499456246272 zombie.png|
51.45422931103088 0.0043821816652611645 zombie.png|
51.4542102925987 0.0043674235996515876 zombie.png|
51.454260016466144 0.004335237091472877 zombie.png|
51.45426461278731 0.0043533420023234015 zombie.png|
51.45427380542823 0.00437010580866648 zombie.png|
51.454299969157816 0.004296644787560311 zombie.png|
51.454316515053144 0.004324807982216683 zombie.png|
51.45435433421993 0.004271163801918831 zombie.png|
51.45436556177907 0.004291950921784249 zombie.png|
51.454370880095546 0.004315420250664559 zombie.png|
51.454291105282856 0.004330172400246468 sword.png|
51.45434487943119 0.004297985892067757 sword.png|
51.454430563382815 0.004205449681053963 zombie.png|
51.454448291076844 0.004283904294739571 zombie.png|
51.454478924093934 0.004187857948023677 zombie.png|
51.45449310623471 0.004275029741007685 zombie.png|
51.45451910681467 0.004351472697932124 zombie.png|
51.45450492468198 0.004303863487917781 sword.png|
51.4545421527709 0.004393046937662959 sword.png|
51.45469229880653 0.004434623433788865 zombie.png|
51.45469879892456 0.004468821598728745 zombie.png|
51.45469761708499 0.004455410553654282 zombie.png|
51.454682253167775 0.004448705031117051 zombie.png|
51.454682253167775 0.004445352269848435 zombie.png|
51.45467929856773 0.004473515464504807 zombie.png|
51.454691707886695 0.004459433867176621 zombie.png|
51.454695876413005 0.004484643498479102 zombie.png|
51.454687603534815 0.004485892849621642 zombie.png|
51.454666071816604 0.004534809839880083 sword.png|
51.45469266321792 0.004554926407491777 hospital.png|
51.4547363912664 0.004580407393133257 hospital.png|
51.454722209201215 0.004577725184118364 sword.png|
51.45476770997808 0.004585771811163042 sword.png|
51.45480245259098 0.004593921918352173 zombie.png|
51.45485183059598 0.004599010739676501 zombie.png|
51.45487487638423 0.004591634664885547 zombie.png|
51.4548843310632 0.004556393527477276 zombie.png|
51.454898513078 0.004517501496761334 zombie.png|
51.45491033142035 0.0044799505705528375 zombie.png|
51.45479155694092 0.004682457351177227 zombie.png|
51.45497355949973 0.004306948089092266 zombie.png|
51.45489792216082 0.004365956687419903 zombie.png|
51.45509174259088 0.004151379966228497 zombie.png|
51.45513428842883 0.0044517873758964654 zombie.png|
51.45519574345803 0.004891669654338848 zombie.png|
51.455295016791986 0.004335896285052598 sword.png|
51.45572519874429 0.004314438612933458 sword.png|
51.455191016151026 0.0053014915304139265 sword.png|
51.455191016151026 0.005843297751422227 sword.png|
51.45590483396403 0.004582659514422716 hospital.png|
51.45589065226186 0.004448549063678087 sword.png|
51.45579138022328 0.004486099989886583 sword.png|
51.45581974368491 0.004625574858660997 sword.png|
51.45595683350099 0.004765049727435411 sword.png|
51.45607501404643 0.004486099989886583 sword.png|
51.45607501404643 0.004593388350482286 sword.png|
51.45560701729312 0.0039603870229676374 zombie.png|
51.455578653699334 0.004191056998248399 zombie.png|
51.45552192645887 0.004437820227618516 zombie.png|
51.45546519914788 0.0046148460226014265 zombie.png|
51.45542738090141 0.004861609251971544 zombie.png|
51.4553895626236 0.005172745497699083 zombie.png|
51.4555550173577 0.005499974997515977 zombie.png|
51.45583392540909 0.00574058604460248 zombie.png|
51.456070286830496 0.005558195831589785 zombie.png|
51.456145922226874 0.0052309663317728905 zombie.png|
51.455989924084534 0.004968109848313418 zombie.png|
51.455852834367846 0.004018607857041445 zombie.png|
51.45598046963453 0.004147353889756289 zombie.png|
51.45622005690152 0.0042389747147231205 zombie.png|
51.45680622602202 0.0050650950913100345 zombie.png|
51.456550959749634 0.00440527167364646 zombie.png|
51.45640914453703 0.004743230009522925 zombie.png|
51.45676368174244 0.004619848394837867 zombie.png|
51.45673059171976 0.004179966116395484 zombie.png|
51.45692913149588 0.0037883636002211674 zombie.png|
51.456607685711305 0.003917109632936011 zombie.png|
51.457127670408454 0.004426729345765601 zombie.png|
51.45725057501677 0.003573786879029761 zombie.png|
51.45726002920374 0.004845153952088843 zombie.png|
51.45692913149588 0.005295765066590796 zombie.png|
51.45720803115135 0.004646670484986792 sword.png|
51.45737820637517 0.0036918040756850345 zombie.png|
51.45745856667698 0.0038956519608168705 zombie.png|
51.4573592980483 0.0033162948136000736 zombie.png|
51.456938585749405 0.0034182187561659916 zombie.png|
51.456612412871614 0.0036918040756850345 zombie.png|
51.457600378629195 0.003643524313416968 zombie.png|
51.45762401391172 0.004147779608216773 zombie.png|
51.45767128444009 0.004770052099671851 zombie.png|
51.45769964673363 0.004952442312684546 zombie.png|
51.45708653602782 0.003972636201798885 sword.png|
51.45709126313851 0.004782663324296443 sword.png|
51.45778614308613 0.004600273111283748 sword.png|
51.45647673464261 0.005367384889543025 sword.png|
51.45647673464261 0.004455433824479549 sword.png|
51.45635382795061 0.00397800061982867 sword.png|
51.454969318801005 0.004950495461844007 sword.png|
51.455248230431025 0.00643107483806471 sword.png|
51.45561695844486 0.0058731753629670536 sword.png|
51.456240952913774 0.0047359187406526004 hospital.png|
51.456619127228386 0.004864664773367444 hospital.png|
51.45642531328353 0.004494519929312268 hospital.png|
51.456496220919796 0.005036326150320569 hospital.png|
51.45632604240772 0.004542799691580335 sword.png|
51.45638276864892 0.004982681970022718 sword.png|
51.45662385438748 0.0046339947980866825 sword.png|
51.456515129604206 0.004285307626150647 sword.png|
51.45670894316768 0.005052419404409925 sword.png|
51.45221073725162 -0.00002950429916381836 sword.png|
51.45221297016913 0.000005044968243161918 sword.png|
51.452169961546495 -0.0007181614637374878 sword.png|
51.452010649150516 0.0020080683128709254 sword.png|
51.45200533055904 0.002020138253437942 sword.png|
51.45202483205811 0.001988622297512954 sword.png|
51.45204787927353 0.0019752112524384913 hospital.png|
51.45199705719328 0.002034219850766128 hospital.png|
51.452062653123434 0.0019618002073640284 sword.png|
51.452043742594675 0.0019571063415879664 sword.png|
51.452030150647296 0.0019624707596177515 sword.png|
51.4520230591949 0.0019758818046922144 sword.png|
51.45201124010505 0.001987281193005508 sword.png|
51.45200355769506 0.0020033744470948633 sword.png|
51.451991738600235 0.0020261732237214503 sword.png|
51.45198937478087 0.002048972000348037 sword.png|
51.45191749509127 0.0019862538080683834 zombie.png|
51.451934632805674 0.0020063703756800777 zombie.png|
51.45194747692317 0.0020338630180827266 zombie.png|
51.45193979450242 0.0020231341820231563 zombie.png|
51.45192147487851 0.001960772822426904 zombie.png|
51.45193270303597 0.001997653196381677 zombie.png|
51.45210998936675 0.0017368083696833736 zombie.png|
`;


	var markers = data.split("|\n"); 

	function place_marker(location) 
	{			
	    var emoji = document.getElementById('icon_to_use').value;
		var marker = new google.maps.Marker(
		{
		  position: location, // {lat: 52.206727, lng: 0.124450 }, 
		  map: zombie_map,
		  icon: emoji
		});
		
		console.log(location.lat() + " / " + location.lng() + " : " + emoji);
	}
	
    function initMap()
	{	
        var home = new google.maps.LatLng(51.4520379130201, 0.0021386373239673092);	
		old_position = home;
		
		zombie_map = new google.maps.Map(document.getElementById('zombie_map'), {
				zoom: 10,
				center: home
			});
		
		/*
		  zombie_map.addListener('click', function(e) {
			var location = e.latLng;
			place_marker(location);
		});
		*/
		
		for(var i in markers)
		{
			console.log(markers[i]);
			
			var marker_data = markers[i].trim();
			marker_data = marker_data.split(" ");
			
			var latitude = marker_data[0];
			var longitude = marker_data[1];
			var emoji = marker_data[2];
			
			var marker_position = new google.maps.LatLng(latitude, longitude);

			var marker = new google.maps.Marker(
			{
			  position: marker_position, 
			  map: zombie_map,
			  icon: emoji
			});
			
			all_markers.push(marker);
		}
		
		if(navigator.geolocation) {
			navigator.geolocation.watchPosition(set_my_position);
		}
		else {
			alert("Geolocation doesn't work in your browser");
		}    
	}
	
	function set_my_position(position)
	{
		old_position.setMap(null);
		
		var pos = new google.maps.LatLng(position.coords.latitude, position.coords.longitude);	

		var marker = new google.maps.Marker(
		{
		  position: pos, 
		  map: zombie_map,
		  icon: 'player.png'
		});
		
		old_position = marker;
	}

</script>
</body>
</html>

 
